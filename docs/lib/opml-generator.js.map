{"version":3,"file":"opml-generator.js","names":["createOutlines","outlines","map","outline","hasOwnProperty","children","concat","_attr","createBody","xml","createHeader","header","headerObject","Object","keys","key","object","value","Date","toUTCString","main","headerXML","outlinesXML"],"sources":["../../src/lib/opml-generator.js"],"sourcesContent":["/**\n * Created by azu on 2014/01/18.\n * LICENSE : MIT\n */\n\nfunction createOutlines(outlines) {\n    return outlines.map(function (outline) {\n        if (outline.hasOwnProperty('_children')) {\n            var children = outline['_children'];\n            delete outline['_children'];\n            return {'outline': createOutlines(children).concat({_attr: outline})};\n        }\n        return {\n            \"outline\": {\n                _attr : outline\n            }\n        };\n    });\n}\n\nfunction createBody(outlines) {\n    return xml({'body': createOutlines(outlines)});\n}\n\nfunction createHeader(header) {\n    var headerObject = Object.keys(header).map(function (key) {\n        var object = {};\n        var value = header[key];\n        if (key === \"dateCreated\" && value instanceof Date) {\n            object[key] = value.toUTCString();\n        } else {\n            object[key] = value;\n        }\n        return object;\n    });\n    return xml({\n        \"head\": headerObject\n    });\n}\n/**\n *\n * @param header\n * @param outlines\n */\n\nexport function main (header, outlines) {\n    var headerXML = createHeader(header);\n    var outlinesXML = createBody(outlines);\n    return '<?xml version=\"1.0\" encoding=\"UTF-8\"?><opml version=\"2.0\">'\n        + headerXML\n        + outlinesXML\n        + '</opml>';\n}\n"],"mappings":";EAAA;AACA;AACA;AACA;EAEA,SAASA,cAAT,CAAwBC,QAAxB,EAAkC;IAC9B,OAAOA,QAAQ,CAACC,GAAT,CAAa,UAAUC,OAAV,EAAmB;MACnC,IAAIA,OAAO,CAACC,cAAR,CAAuB,WAAvB,CAAJ,EAAyC;QACrC,IAAIC,QAAQ,GAAGF,OAAO,CAAC,WAAD,CAAtB;QACA,OAAOA,OAAO,CAAC,WAAD,CAAd;QACA,OAAO;UAAC,WAAWH,cAAc,CAACK,QAAD,CAAd,CAAyBC,MAAzB,CAAgC;YAACC,KAAK,EAAEJ;UAAR,CAAhC;QAAZ,CAAP;MACH;;MACD,OAAO;QACH,WAAW;UACPI,KAAK,EAAGJ;QADD;MADR,CAAP;IAKH,CAXM,CAAP;EAYH;;EAED,SAASK,UAAT,CAAoBP,QAApB,EAA8B;IAC1B,OAAOQ,GAAG,CAAC;MAAC,QAAQT,cAAc,CAACC,QAAD;IAAvB,CAAD,CAAV;EACH;;EAED,SAASS,YAAT,CAAsBC,MAAtB,EAA8B;IAC1B,IAAIC,YAAY,GAAGC,MAAM,CAACC,IAAP,CAAYH,MAAZ,EAAoBT,GAApB,CAAwB,UAAUa,GAAV,EAAe;MACtD,IAAIC,MAAM,GAAG,EAAb;MACA,IAAIC,KAAK,GAAGN,MAAM,CAACI,GAAD,CAAlB;;MACA,IAAIA,GAAG,KAAK,aAAR,IAAyBE,KAAK,YAAYC,IAA9C,EAAoD;QAChDF,MAAM,CAACD,GAAD,CAAN,GAAcE,KAAK,CAACE,WAAN,EAAd;MACH,CAFD,MAEO;QACHH,MAAM,CAACD,GAAD,CAAN,GAAcE,KAAd;MACH;;MACD,OAAOD,MAAP;IACH,CATkB,CAAnB;IAUA,OAAOP,GAAG,CAAC;MACP,QAAQG;IADD,CAAD,CAAV;EAGH;EACD;AACA;AACA;AACA;AACA;;;EAEO,SAASQ,IAAT,CAAeT,MAAf,EAAuBV,QAAvB,EAAiC;IACpC,IAAIoB,SAAS,GAAGX,YAAY,CAACC,MAAD,CAA5B;IACA,IAAIW,WAAW,GAAGd,UAAU,CAACP,QAAD,CAA5B;IACA,OAAO,+DACDoB,SADC,GAEDC,WAFC,GAGD,SAHN;EAIH"}