{"version":3,"file":"Main.controller.js","names":["BaseController","Octokit","initializeApp","getAuth","GithubAuthProvider","signInWithPopup","getFunctions","httpsCallable","Main","loadSAPData","data","getModel","setProperty","functions","app","console","log","addMessage","sapUsername","getProperty","MessageBox","error","response","userName","JSON","parse","list_items","onInit","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","auth","provider","setCustomParameters","allow_signup","token","getView","setModel","JSONModel","busyOPMLButton","typeGitHubButton","typeSAPButton","OPMLButtonEnabled","signInToGitHub","githubSignInPopup","loadGitHubData","githubUsername","page","followers","following","octokit","throttle","onRateLimit","retryAfter","options","warn","method","url","request","retryCount","onAbuseLimit","resultFollowing","status","message","length","opml","GitHubFollowing","SAPFollowing","SAPBlogs","byId","getTokens","outlinesGitHub","outlinesSAP","outlinesSAPBlogs","header","title","dateCreated","Date","ownerName","i","push","text","login","type","xmlUrl","html_url","htmlUrl","fullName","profileUrl","getText","getKey","headerXML","outlinesXMLGitHub","outlinesXMLSAP","outlinesXMLSAPBlogs","outlinesXML","xml","downloadFile","then","result","_tokenResponse","oauthAccessToken","catch","errorCode","code","errorMessage","email","credential","filename","element","document","createElement","setAttribute","encodeURIComponent","style","display","body","appendChild","click","removeChild","handleValueHelp","oEvent","sInputValue","getSource","getValue","oView","_pValueHelpDialog","Fragment","load","id","getId","name","controller","oValueHelpDialog","addDependent","getBinding","filter","Filter","FilterOperator","Contains","aSorter","sap","ui","model","Sorter","sort","open","_handleValueHelpSearch","evt","sValue","getParameter","oFilter","oddIdFilter","path","test","value","toLowerCase","indexOf","onTokenUpdate","_handleValueHelpClose","aSelectedItems","oMultiInput","forEach","oItem","addToken","Token","getTitle","key","getBindingContext","getObject","tag"],"sources":["../../src/controller/Main.controller.ts"],"sourcesContent":["/* eslint-disable no-mixed-spaces-and-tabs */\r\n/* eslint-disable @typescript-eslint/no-unsafe-member-access */\r\n/* eslint-disable @typescript-eslint/restrict-plus-operands */\r\n/* eslint-disable @typescript-eslint/no-unsafe-assignment */\r\nimport BaseController from \"./BaseController\";\r\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\r\nimport MessageBox from \"sap/m/MessageBox\";\r\nimport { Octokit } from \"@octokit/core\";\r\nimport {\r\n  initializeApp,\r\n  getAuth,\r\n  GithubAuthProvider,\r\n  signInWithPopup,\r\n  getFunctions,\r\n  connectFunctionsEmulator,\r\n  httpsCallable,\r\n} from \"githubfollower/lib/firebase\";\r\nimport Fragment from \"sap/ui/core/Fragment\";\r\nimport FilterOperator from \"sap/ui/model/FilterOperator\";\r\nimport Token from \"sap/m/Token\";\r\nimport Filter from \"sap/ui/model/Filter\";\r\n\r\n/**\r\n * @namespace de.marianzeis.githubfollower.controller\r\n */\r\nexport default class Main extends BaseController {\r\n  public async loadSAPData(): void {\r\n    let data = [];\r\n    this.getModel(\"data\").setProperty(\"/busySAPButton\", true);\r\n    this.getModel(\"data\").setProperty(\"/busyOPMLButton\", true);\r\n    try {\r\n      const functions = getFunctions(this.app);\r\n      // connectFunctionsEmulator(functions, \"localhost\", 5001);\r\n      console.log(functions);\r\n      const addMessage = httpsCallable(functions, \"helloWorld\");\r\n      const sapUsername = this.getModel(\"data\").getProperty(\r\n        \"/SAPCommunityUsername\"\r\n      );\r\n\t  if(!sapUsername || sapUsername === \"\"){\r\n\t\tthis.getModel(\"data\").setProperty(\"/busySAPButton\", false);\r\n\t\tthis.getModel(\"data\").setProperty(\"/busyOPMLButton\", false);\r\n\t\tMessageBox.error(\"SAP Username is empty\")\r\n\t\treturn;\r\n\t}\r\n      const response = await addMessage({ userName: sapUsername });\r\n      data = JSON.parse(response.data);\r\n      console.log(data);\r\n    } catch (error) {\r\n\t\tthis.getModel(\"data\").setProperty(\"/busySAPButton\", false);\r\n\t\tthis.getModel(\"data\").setProperty(\"/busyOPMLButton\", false);\r\n      MessageBox.error(\"Error while loading SAP Data (maybe User not found)\");\r\n\t  return;\r\n    }\r\n    this.getModel(\"data\").setProperty(\"/SAPFollowing\", data.list_items);\r\n\tthis.getModel(\"data\").setProperty(\"/typeSAPButton\", \"Success\");\r\n    this.getModel(\"data\").setProperty(\"/busySAPButton\", false);\r\n\tthis.getModel(\"data\").setProperty(\"/busyOPMLButton\", false);\r\n\tthis.getModel(\"data\").setProperty(\"/OPMLButtonEnabled\", true);\r\n  }\r\n\r\n  public onInit(): void {\r\n    const firebaseConfig = {\r\n      apiKey: \"AIzaSyCy1d13pYC79sOgUZnn4-sJ5VM9QY6TjqM\",\r\n      authDomain: \"github-followers-281ea.firebaseapp.com\",\r\n      projectId: \"github-followers-281ea\",\r\n      storageBucket: \"github-followers-281ea.appspot.com\",\r\n      messagingSenderId: \"576057379323\",\r\n      appId: \"1:576057379323:web:4fb59feea548cdefa1235e\",\r\n    };\r\n\r\n    // Initialize Firebase\r\n    this.app = initializeApp(firebaseConfig);\r\n\r\n    // // // Initialize Firebase Authentication and get a reference to the service\r\n    this.auth = getAuth(this.app);\r\n    this.provider = new GithubAuthProvider();\r\n    this.provider.setCustomParameters({\r\n      allow_signup: \"false\",\r\n    });\r\n    this.token = \"\";\r\n\r\n    // create Jsonmodel\r\n    this.getView().setModel(\r\n      new JSONModel({\r\n        token: \"\",\r\n        busyOPMLButton: false,\r\n\t\ttypeGitHubButton : \"Default\",\r\n\t\ttypeSAPButton : \"Default\",\r\n\t\tOPMLButtonEnabled: false\r\n      }),\r\n      \"data\"\r\n    );\r\n  }\r\n\r\n  public signInToGitHub(): void {\r\n    this.githubSignInPopup(this.provider);\r\n  }\r\n\r\n  public async loadGitHubData(): Promise<void> {\r\n    this.getModel(\"data\").setProperty(\"/busyGitHubButton\", true);\r\n\tthis.getModel(\"data\").setProperty(\"/busyOPMLButton\", true);\r\n\t\r\n    const githubUsername = this.getModel(\"data\").getProperty(\"/gitHubUsername\");\r\n\tif(!githubUsername || githubUsername === \"\"){\r\n\t\tthis.getModel(\"data\").setProperty(\"/busyGitHubButton\", false);\r\n\t\tthis.getModel(\"data\").setProperty(\"/busyOPMLButton\", false);\r\n\t\tMessageBox.error(\"GitHub Username is empty\")\r\n\t\treturn;\r\n\t}\r\n    let page = 1;\r\n    let followers = [];\r\n    let following = [];\r\n    const octokit = new Octokit({\r\n      throttle: {\r\n        onRateLimit: (retryAfter: any, options: any) => {\r\n          this.octokit.log.warn(\r\n            `Request quota exhausted for request ${options.method} ${options.url}`\r\n          );\r\n\r\n          // Retry four times after hitting a rate limit error, then give up\r\n          if (options.request.retryCount <= 4) {\r\n            console.log(`Retrying after ${retryAfter} seconds!`);\r\n            return true;\r\n          }\r\n        },\r\n        onAbuseLimit: (retryAfter: any, options: any) => {\r\n          // does not retry, only logs a warning\r\n          this.octokit.log.warn(\r\n            `Abuse detected for request ${options.method} ${options.url}`\r\n          );\r\n        },\r\n      },\r\n    });\r\n    let resultFollowing: any;\r\n    try {\r\n      resultFollowing = await octokit.request(\r\n        `GET /users/${githubUsername}/following`\r\n      );\r\n    } catch (error: any) {\r\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\r\n      if (error.status === 404) {\r\n\t\tthis.getModel(\"data\").setProperty(\"/busyGitHubButton\", false);\r\n\t\tthis.getModel(\"data\").setProperty(\"/busyOPMLButton\", false);\r\n        MessageBox.error(`User ${githubUsername} not found`);\r\n      } else {\r\n\t\tthis.getModel(\"data\").setProperty(\"/busyGitHubButton\", false);\r\n\t\tthis.getModel(\"data\").setProperty(\"/busyOPMLButton\", false);\r\n        MessageBox.error(error.message);\r\n      }\r\n    }\r\n    following = resultFollowing.data;\r\n    while (resultFollowing.data.length >= 30) {\r\n      page += 1;\r\n      resultFollowing = await octokit.request(\r\n        `GET /users/${githubUsername}/following`,\r\n        { page: page }\r\n      );\r\n      following = [...following, ...resultFollowing.data];\r\n    }\r\n    this.getModel(\"data\").setProperty(\"/GitHubFollowing\", following);\r\n\tthis.getModel(\"data\").setProperty(\"/typeGitHubButton\", \"Success\");\r\n    this.getModel(\"data\").setProperty(\"/busyGitHubButton\", false);\r\n\tthis.getModel(\"data\").setProperty(\"/busyOPMLButton\", false);\r\n\tthis.getModel(\"data\").setProperty(\"/OPMLButtonEnabled\", true);\r\n    // MessageBox.success(\"Your OPML file is ready!\");\r\n  }\r\n\r\n  public opml(): void {\r\n    const GitHubFollowing =\r\n      this.getModel(\"data\").getProperty(\"/GitHubFollowing\") || [];\r\n    const SAPFollowing =\r\n      this.getModel(\"data\").getProperty(\"/SAPFollowing\") || [];\r\n    const SAPBlogs = this.byId(\"multiInput\").getTokens();\r\n    let outlinesGitHub = [];\r\n    let outlinesSAP = [];\r\n    let outlinesSAPBlogs = [];\r\n    var header = {\r\n      title: \"title-text\",\r\n      dateCreated: new Date(2014, 2, 9),\r\n      ownerName: \"azu\",\r\n    };\r\n    for (var i = 0; i < GitHubFollowing.length; i++) {\r\n      outlinesGitHub.push({\r\n        text: GitHubFollowing[i].login,\r\n        title: GitHubFollowing[i].login,\r\n        type: \"rss\",\r\n        xmlUrl: GitHubFollowing[i].html_url + \".atom\",\r\n        htmlUrl: GitHubFollowing[i].html_url,\r\n      });\r\n    }\r\n    for (var i = 0; i < SAPFollowing.length; i++) {\r\n      outlinesSAP.push({\r\n        text: SAPFollowing[i].fullName,\r\n        title: SAPFollowing[i].fullName,\r\n        type: \"rss\",\r\n        xmlUrl: `https://content.services.sap.com/feed?author=${SAPFollowing[i].userName}`,\r\n        htmlUrl: SAPFollowing[i].profileUrl,\r\n      });\r\n    }\r\n    for (var i = 0; i < SAPBlogs.length; i++) {\r\n      outlinesSAPBlogs.push({\r\n        text: SAPBlogs[i].getText(),\r\n        title: SAPBlogs[i].getText(),\r\n        type: \"rss\",\r\n        xmlUrl: `https://content.services.sap.com/feed?type=blogpost&amp;tags=&amp;${SAPBlogs[i].getKey()}`,\r\n        htmlUrl: `https://blogs.sap.com/tags/${SAPBlogs[i].getKey()}`,\r\n      });\r\n    }\r\n    let headerXML =\r\n      \"<head><title>Sample OPML file for RSSReader</title></head>\";\r\n    let outlinesXMLGitHub = [];\r\n    let outlinesXMLSAP = [];\r\n    let outlinesXMLSAPBlogs = [];\r\n    for (let i = 0; i < outlinesGitHub.length; i++) {\r\n      let outlinesXML =\r\n        '<outline text=\"' +\r\n        outlinesGitHub[i].text +\r\n        '\" title=\"' +\r\n        outlinesGitHub[i].title +\r\n        '\" type=\"' +\r\n        outlinesGitHub[i].type +\r\n        '\" xmlUrl=\"' +\r\n        outlinesGitHub[i].xmlUrl +\r\n        '\" htmlUrl=\"' +\r\n        outlinesGitHub[i].htmlUrl +\r\n        '\" />';\r\n      outlinesXMLGitHub.push(outlinesXML);\r\n    }\r\n    for (let i = 0; i < outlinesSAP.length; i++) {\r\n      let outlinesXML =\r\n        '<outline text=\"' +\r\n        outlinesSAP[i].text +\r\n        '\" title=\"' +\r\n        outlinesSAP[i].title +\r\n        '\" type=\"' +\r\n        outlinesSAP[i].type +\r\n        '\" xmlUrl=\"' +\r\n        outlinesSAP[i].xmlUrl +\r\n        '\" htmlUrl=\"' +\r\n        outlinesSAP[i].htmlUrl +\r\n        '\" />';\r\n      outlinesXMLSAP.push(outlinesXML);\r\n    }\r\n    for (let i = 0; i < outlinesSAPBlogs.length; i++) {\r\n      let outlinesXML =\r\n        '<outline text=\"' +\r\n        outlinesSAPBlogs[i].text +\r\n        '\" title=\"' +\r\n        outlinesSAPBlogs[i].title +\r\n        '\" type=\"' +\r\n        outlinesSAPBlogs[i].type +\r\n        '\" xmlUrl=\"' +\r\n        outlinesSAPBlogs[i].xmlUrl +\r\n        '\" htmlUrl=\"' +\r\n        outlinesSAPBlogs[i].htmlUrl +\r\n        '\" />';\r\n      outlinesXMLSAPBlogs.push(outlinesXML);\r\n    }\r\n    let outlinesXML = \"\";\r\n    if (outlinesXMLSAP.length > 0) {\r\n      outlinesXML =\r\n        '<outline text=\"SAP Community Following\" title=\"SAP Community Following\">' +\r\n        outlinesXMLSAP +\r\n        \" </outline>\";\r\n    }\r\n    if (outlinesXMLGitHub.length > 0) {\r\n      outlinesXML =\r\n        outlinesXML +\r\n        '<outline text=\"GitHub Following\" title=\"GitHub Following\">' +\r\n        outlinesXMLGitHub +\r\n        \" </outline>\";\r\n    }\r\n    if (outlinesXMLSAPBlogs.length > 0) {\r\n      outlinesXML =\r\n        outlinesXML +\r\n        '<outline text=\"SAP Blogs\" title=\"SAP Blogs\">' +\r\n        outlinesXMLSAPBlogs +\r\n        \" </outline>\";\r\n    }\r\n    let xml =\r\n      '<?xml version=\"1.0\" encoding=\"UTF-8\"?><opml version=\"2.0\">' +\r\n      headerXML +\r\n      \"<body>\" +\r\n      outlinesXML +\r\n      \"</body>\" +\r\n      \"</opml>\";\r\n    this.downloadFile(\"opml.xml\", xml);\r\n  }\r\n  public githubSignInPopup(provider): void {\r\n    // [START auth_github_signin_popup]\r\n    const auth = getAuth();\r\n    signInWithPopup(auth, provider)\r\n      .then((result) => {\r\n        /** @type {firebase.auth.OAuthCredential} */\r\n\r\n        // This gives you a GitHub Access Token. You can use it to access the GitHub API.\r\n        this.token = result._tokenResponse.oauthAccessToken;\r\n        this.getModel(\"data\").setProperty(\"/token\", this.token);\r\n        // ...\r\n      })\r\n      .catch((error) => {\r\n        // Handle Errors here.\r\n        var errorCode = error.code;\r\n        var errorMessage = error.message;\r\n        // The email of the user's account used.\r\n        var email = error.email;\r\n        // The firebase.auth.AuthCredential type that was used.\r\n        var credential = error.credential;\r\n        // ...\r\n      });\r\n    // [END auth_github_signin_popup]\r\n  }\r\n\r\n  public downloadFile(filename, text): void {\r\n    var element = document.createElement(\"a\");\r\n    element.setAttribute(\r\n      \"href\",\r\n      \"data:text/plain;charset=utf-8,\" + encodeURIComponent(text)\r\n    );\r\n    element.setAttribute(\"download\", filename);\r\n\r\n    element.style.display = \"none\";\r\n    document.body.appendChild(element);\r\n\r\n    element.click();\r\n\r\n    document.body.removeChild(element);\r\n  }\r\n\r\n  public handleValueHelp(oEvent): any {\r\n    var sInputValue = oEvent.getSource().getValue(),\r\n      oView = this.getView();\r\n\r\n    // create value help dialog\r\n    if (!this._pValueHelpDialog) {\r\n      this._pValueHelpDialog = Fragment.load({\r\n        id: oView.getId(),\r\n        name: \"de.marianzeis.githubfollower.view.Dialog\",\r\n        controller: this\r\n      }).then(function (oValueHelpDialog) {\r\n        oView.addDependent(oValueHelpDialog);\r\n        return oValueHelpDialog;\r\n      });\r\n    }\r\n\r\n    this._pValueHelpDialog.then(function (oValueHelpDialog) {\r\n      // create a filter for the binding\r\n      oValueHelpDialog.getBinding(\"items\").filter([new Filter(\r\n        \"title\",\r\n        FilterOperator.Contains,\r\n        sInputValue\r\n      )]);\r\n\t  let aSorter = [];\r\n\r\n            aSorter.push(new sap.ui.model.Sorter(\"count\", true));\r\n\t  oValueHelpDialog.getBinding(\"items\").sort(aSorter)\r\n      // open value help dialog filtered by the input value\r\n      oValueHelpDialog.open(sInputValue);\r\n    });\r\n  }\r\n\r\n  public _handleValueHelpSearch(evt):any {\r\n    var sValue = evt.getParameter(\"value\");\r\n    var oFilter = new Filter(\r\n      \"title\",\r\n      FilterOperator.Contains,\r\n      sValue\r\n    );\r\n    var oddIdFilter = new Filter({\r\n      path: 'title',\r\n      test: function(value) {\r\n          return value.toLowerCase().indexOf(sValue.toLowerCase()) !== -1\r\n      }\r\n  });\r\n    evt.getSource().getBinding(\"items\").filter(oddIdFilter);\r\n  }\r\n\r\n  public onTokenUpdate(evt):any {\r\n    this.getModel(\"data\").setProperty(\"/OPMLButtonEnabled\", true);\r\n  }\r\n\r\n  public _handleValueHelpClose(evt):any {\r\n    this.getModel(\"data\").setProperty(\"/OPMLButtonEnabled\", true);\r\n    var aSelectedItems = evt.getParameter(\"selectedItems\"),\r\n      oMultiInput = this.byId(\"multiInput\");\r\n\r\n    if (aSelectedItems && aSelectedItems.length > 0) {\r\n      aSelectedItems.forEach(function (oItem) {\r\n        oMultiInput.addToken(new Token({\r\n          text: oItem.getTitle(),\r\n          key: oItem.getBindingContext(\"tags\").getObject().tag\r\n        }));\r\n      });\r\n    }\r\n  }\r\n\r\n}\r\n"],"mappings":"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"}