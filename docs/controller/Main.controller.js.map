{"version":3,"file":"Main.controller.js","names":["BaseController","Octokit","initializeApp","getAuth","GithubAuthProvider","signInWithPopup","getFunctions","httpsCallable","Main","loadSAPData","data","getModel","setProperty","functions","app","console","log","addMessage","sapUsername","getProperty","MessageBox","error","response","userName","JSON","parse","list_items","onInit","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","auth","provider","setCustomParameters","allow_signup","token","getView","setModel","JSONModel","busyOPMLButton","typeGitHubButton","typeSAPButton","OPMLButtonEnabled","signInToGitHub","githubSignInPopup","loadGitHubData","githubUsername","page","followers","following","octokit","throttle","onRateLimit","retryAfter","options","warn","method","url","request","retryCount","onAbuseLimit","resultFollowing","status","message","length","opml","GitHubFollowing","SAPFollowing","SAPBlogs","byId","getTokens","outlinesGitHub","outlinesSAP","outlinesSAPBlogs","header","title","dateCreated","Date","ownerName","i","push","text","login","type","xmlUrl","html_url","htmlUrl","fullName","profileUrl","getText","getKey","headerXML","outlinesXMLGitHub","outlinesXMLSAP","outlinesXMLSAPBlogs","outlinesXML","xml","downloadFile","then","result","_tokenResponse","oauthAccessToken","catch","errorCode","code","errorMessage","email","credential","filename","element","document","createElement","setAttribute","encodeURIComponent","style","display","body","appendChild","click","removeChild","handleValueHelp","oEvent","sInputValue","getSource","getValue","oView","_pValueHelpDialog","Fragment","load","id","getId","name","controller","oValueHelpDialog","addDependent","getBinding","filter","Filter","FilterOperator","Contains","aSorter","sap","ui","model","Sorter","sort","open","_handleValueHelpSearch","evt","sValue","getParameter","oFilter","oddIdFilter","path","test","value","toLowerCase","indexOf","onTokenUpdate","_handleValueHelpClose","aSelectedItems","oMultiInput","forEach","oItem","addToken","Token","getTitle","key","getBindingContext","getObject","tag"],"sources":["../../src/controller/Main.controller.ts"],"sourcesContent":["/* eslint-disable no-mixed-spaces-and-tabs */\n/* eslint-disable @typescript-eslint/no-unsafe-member-access */\n/* eslint-disable @typescript-eslint/restrict-plus-operands */\n/* eslint-disable @typescript-eslint/no-unsafe-assignment */\nimport BaseController from \"./BaseController\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport MessageBox from \"sap/m/MessageBox\";\nimport { Octokit } from \"@octokit/core\";\nimport {\n  initializeApp,\n  getAuth,\n  GithubAuthProvider,\n  signInWithPopup,\n  getFunctions,\n  connectFunctionsEmulator,\n  httpsCallable,\n} from \"githubfollower/lib/firebase\";\nimport Fragment from \"sap/ui/core/Fragment\";\nimport FilterOperator from \"sap/ui/model/FilterOperator\";\nimport Token from \"sap/m/Token\";\nimport Filter from \"sap/ui/model/Filter\";\n\n/**\n * @namespace de.marianzeis.githubfollower.controller\n */\nexport default class Main extends BaseController {\n  public async loadSAPData(): void {\n    let data = [];\n    this.getModel(\"data\").setProperty(\"/busySAPButton\", true);\n    this.getModel(\"data\").setProperty(\"/busyOPMLButton\", true);\n    try {\n      const functions = getFunctions(this.app);\n      // connectFunctionsEmulator(functions, \"localhost\", 5001);\n      console.log(functions);\n      const addMessage = httpsCallable(functions, \"helloWorld\");\n      const sapUsername = this.getModel(\"data\").getProperty(\n        \"/SAPCommunityUsername\"\n      );\n\t  if(!sapUsername || sapUsername === \"\"){\n\t\tthis.getModel(\"data\").setProperty(\"/busySAPButton\", false);\n\t\tthis.getModel(\"data\").setProperty(\"/busyOPMLButton\", false);\n\t\tMessageBox.error(\"SAP Username is empty\")\n\t\treturn;\n\t}\n      const response = await addMessage({ userName: sapUsername });\n      data = JSON.parse(response.data);\n      console.log(data);\n    } catch (error) {\n\t\tthis.getModel(\"data\").setProperty(\"/busySAPButton\", false);\n\t\tthis.getModel(\"data\").setProperty(\"/busyOPMLButton\", false);\n      MessageBox.error(\"Error while loading SAP Data (maybe User not found)\");\n\t  return;\n    }\n    this.getModel(\"data\").setProperty(\"/SAPFollowing\", data.list_items);\n\tthis.getModel(\"data\").setProperty(\"/typeSAPButton\", \"Success\");\n    this.getModel(\"data\").setProperty(\"/busySAPButton\", false);\n\tthis.getModel(\"data\").setProperty(\"/busyOPMLButton\", false);\n\tthis.getModel(\"data\").setProperty(\"/OPMLButtonEnabled\", true);\n  }\n\n  public onInit(): void {\n    const firebaseConfig = {\n      apiKey: \"AIzaSyCy1d13pYC79sOgUZnn4-sJ5VM9QY6TjqM\",\n      authDomain: \"github-followers-281ea.firebaseapp.com\",\n      projectId: \"github-followers-281ea\",\n      storageBucket: \"github-followers-281ea.appspot.com\",\n      messagingSenderId: \"576057379323\",\n      appId: \"1:576057379323:web:4fb59feea548cdefa1235e\",\n    };\n\n    // Initialize Firebase\n    this.app = initializeApp(firebaseConfig);\n\n    // // // Initialize Firebase Authentication and get a reference to the service\n    this.auth = getAuth(this.app);\n    this.provider = new GithubAuthProvider();\n    this.provider.setCustomParameters({\n      allow_signup: \"false\",\n    });\n    this.token = \"\";\n\n    // create Jsonmodel\n    this.getView().setModel(\n      new JSONModel({\n        token: \"\",\n        busyOPMLButton: false,\n\t\ttypeGitHubButton : \"Default\",\n\t\ttypeSAPButton : \"Default\",\n\t\tOPMLButtonEnabled: false\n      }),\n      \"data\"\n    );\n  }\n\n  public signInToGitHub(): void {\n    this.githubSignInPopup(this.provider);\n  }\n\n  public async loadGitHubData(): Promise<void> {\n    this.getModel(\"data\").setProperty(\"/busyGitHubButton\", true);\n\tthis.getModel(\"data\").setProperty(\"/busyOPMLButton\", true);\n\t\n    const githubUsername = this.getModel(\"data\").getProperty(\"/gitHubUsername\");\n\tif(!githubUsername || githubUsername === \"\"){\n\t\tthis.getModel(\"data\").setProperty(\"/busyGitHubButton\", false);\n\t\tthis.getModel(\"data\").setProperty(\"/busyOPMLButton\", false);\n\t\tMessageBox.error(\"GitHub Username is empty\")\n\t\treturn;\n\t}\n    let page = 1;\n    let followers = [];\n    let following = [];\n    const octokit = new Octokit({\n      throttle: {\n        onRateLimit: (retryAfter: any, options: any) => {\n          this.octokit.log.warn(\n            `Request quota exhausted for request ${options.method} ${options.url}`\n          );\n\n          // Retry four times after hitting a rate limit error, then give up\n          if (options.request.retryCount <= 4) {\n            console.log(`Retrying after ${retryAfter} seconds!`);\n            return true;\n          }\n        },\n        onAbuseLimit: (retryAfter: any, options: any) => {\n          // does not retry, only logs a warning\n          this.octokit.log.warn(\n            `Abuse detected for request ${options.method} ${options.url}`\n          );\n        },\n      },\n    });\n    let resultFollowing: any;\n    try {\n      resultFollowing = await octokit.request(\n        `GET /users/${githubUsername}/following`\n      );\n    } catch (error: any) {\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n      if (error.status === 404) {\n\t\tthis.getModel(\"data\").setProperty(\"/busyGitHubButton\", false);\n\t\tthis.getModel(\"data\").setProperty(\"/busyOPMLButton\", false);\n        MessageBox.error(`User ${githubUsername} not found`);\n      } else {\n\t\tthis.getModel(\"data\").setProperty(\"/busyGitHubButton\", false);\n\t\tthis.getModel(\"data\").setProperty(\"/busyOPMLButton\", false);\n        MessageBox.error(error.message);\n      }\n    }\n    following = resultFollowing.data;\n    while (resultFollowing.data.length >= 30) {\n      page += 1;\n      resultFollowing = await octokit.request(\n        `GET /users/${githubUsername}/following`,\n        { page: page }\n      );\n      following = [...following, ...resultFollowing.data];\n    }\n    this.getModel(\"data\").setProperty(\"/GitHubFollowing\", following);\n\tthis.getModel(\"data\").setProperty(\"/typeGitHubButton\", \"Success\");\n    this.getModel(\"data\").setProperty(\"/busyGitHubButton\", false);\n\tthis.getModel(\"data\").setProperty(\"/busyOPMLButton\", false);\n\tthis.getModel(\"data\").setProperty(\"/OPMLButtonEnabled\", true);\n    // MessageBox.success(\"Your OPML file is ready!\");\n  }\n\n  public opml(): void {\n    const GitHubFollowing =\n      this.getModel(\"data\").getProperty(\"/GitHubFollowing\") || [];\n    const SAPFollowing =\n      this.getModel(\"data\").getProperty(\"/SAPFollowing\") || [];\n    const SAPBlogs = this.byId(\"multiInput\").getTokens();\n    let outlinesGitHub = [];\n    let outlinesSAP = [];\n    let outlinesSAPBlogs = [];\n    var header = {\n      title: \"title-text\",\n      dateCreated: new Date(2014, 2, 9),\n      ownerName: \"azu\",\n    };\n    for (var i = 0; i < GitHubFollowing.length; i++) {\n      outlinesGitHub.push({\n        text: GitHubFollowing[i].login,\n        title: GitHubFollowing[i].login,\n        type: \"rss\",\n        xmlUrl: GitHubFollowing[i].html_url + \".atom\",\n        htmlUrl: GitHubFollowing[i].html_url,\n      });\n    }\n    for (var i = 0; i < SAPFollowing.length; i++) {\n      outlinesSAP.push({\n        text: SAPFollowing[i].fullName,\n        title: SAPFollowing[i].fullName,\n        type: \"rss\",\n        xmlUrl: `https://content.services.sap.com/feed?author=${SAPFollowing[i].userName}`,\n        htmlUrl: SAPFollowing[i].profileUrl,\n      });\n    }\n    for (var i = 0; i < SAPBlogs.length; i++) {\n      outlinesSAPBlogs.push({\n        text: SAPBlogs[i].getText(),\n        title: SAPBlogs[i].getText(),\n        type: \"rss\",\n        xmlUrl: `https://content.services.sap.com/feed?type=blogpost&amp;tags=${SAPBlogs[i].getKey()}`,\n        htmlUrl: `https://blogs.sap.com/tags/${SAPBlogs[i].getKey()}`,\n      });\n    }\n    let headerXML =\n      \"<head><title>Sample OPML file for RSSReader</title></head>\";\n    let outlinesXMLGitHub = [];\n    let outlinesXMLSAP = [];\n    let outlinesXMLSAPBlogs = [];\n    for (let i = 0; i < outlinesGitHub.length; i++) {\n      let outlinesXML =\n        '<outline text=\"' +\n        outlinesGitHub[i].text +\n        '\" title=\"' +\n        outlinesGitHub[i].title +\n        '\" type=\"' +\n        outlinesGitHub[i].type +\n        '\" xmlUrl=\"' +\n        outlinesGitHub[i].xmlUrl +\n        '\" htmlUrl=\"' +\n        outlinesGitHub[i].htmlUrl +\n        '\" />';\n      outlinesXMLGitHub.push(outlinesXML);\n    }\n    for (let i = 0; i < outlinesSAP.length; i++) {\n      let outlinesXML =\n        '<outline text=\"' +\n        outlinesSAP[i].text +\n        '\" title=\"' +\n        outlinesSAP[i].title +\n        '\" type=\"' +\n        outlinesSAP[i].type +\n        '\" xmlUrl=\"' +\n        outlinesSAP[i].xmlUrl +\n        '\" htmlUrl=\"' +\n        outlinesSAP[i].htmlUrl +\n        '\" />';\n      outlinesXMLSAP.push(outlinesXML);\n    }\n    for (let i = 0; i < outlinesSAPBlogs.length; i++) {\n      let outlinesXML =\n        '<outline text=\"' +\n        outlinesSAPBlogs[i].text +\n        '\" title=\"' +\n        outlinesSAPBlogs[i].title +\n        '\" type=\"' +\n        outlinesSAPBlogs[i].type +\n        '\" xmlUrl=\"' +\n        outlinesSAPBlogs[i].xmlUrl +\n        '\" htmlUrl=\"' +\n        outlinesSAPBlogs[i].htmlUrl +\n        '\" />';\n      outlinesXMLSAPBlogs.push(outlinesXML);\n    }\n    let outlinesXML = \"\";\n    if (outlinesXMLSAP.length > 0) {\n      outlinesXML =\n        '<outline text=\"SAP Community Following\" title=\"SAP Community Following\">' +\n        outlinesXMLSAP +\n        \" </outline>\";\n    }\n    if (outlinesXMLGitHub.length > 0) {\n      outlinesXML =\n        outlinesXML +\n        '<outline text=\"GitHub Following\" title=\"GitHub Following\">' +\n        outlinesXMLGitHub +\n        \" </outline>\";\n    }\n    if (outlinesXMLSAPBlogs.length > 0) {\n      outlinesXML =\n        outlinesXML +\n        '<outline text=\"SAP Blogs\" title=\"SAP Blogs\">' +\n        outlinesXMLSAPBlogs +\n        \" </outline>\";\n    }\n    let xml =\n      '<?xml version=\"1.0\" encoding=\"UTF-8\"?><opml version=\"2.0\">' +\n      headerXML +\n      \"<body>\" +\n      outlinesXML +\n      \"</body>\" +\n      \"</opml>\";\n    this.downloadFile(\"opml.xml\", xml);\n  }\n  public githubSignInPopup(provider): void {\n    // [START auth_github_signin_popup]\n    const auth = getAuth();\n    signInWithPopup(auth, provider)\n      .then((result) => {\n        /** @type {firebase.auth.OAuthCredential} */\n\n        // This gives you a GitHub Access Token. You can use it to access the GitHub API.\n        this.token = result._tokenResponse.oauthAccessToken;\n        this.getModel(\"data\").setProperty(\"/token\", this.token);\n        // ...\n      })\n      .catch((error) => {\n        // Handle Errors here.\n        var errorCode = error.code;\n        var errorMessage = error.message;\n        // The email of the user's account used.\n        var email = error.email;\n        // The firebase.auth.AuthCredential type that was used.\n        var credential = error.credential;\n        // ...\n      });\n    // [END auth_github_signin_popup]\n  }\n\n  public downloadFile(filename, text): void {\n    var element = document.createElement(\"a\");\n    element.setAttribute(\n      \"href\",\n      \"data:text/plain;charset=utf-8,\" + encodeURIComponent(text)\n    );\n    element.setAttribute(\"download\", filename);\n\n    element.style.display = \"none\";\n    document.body.appendChild(element);\n\n    element.click();\n\n    document.body.removeChild(element);\n  }\n\n  public handleValueHelp(oEvent): any {\n    var sInputValue = oEvent.getSource().getValue(),\n      oView = this.getView();\n\n    // create value help dialog\n    if (!this._pValueHelpDialog) {\n      this._pValueHelpDialog = Fragment.load({\n        id: oView.getId(),\n        name: \"de.marianzeis.githubfollower.view.Dialog\",\n        controller: this\n      }).then(function (oValueHelpDialog) {\n        oView.addDependent(oValueHelpDialog);\n        return oValueHelpDialog;\n      });\n    }\n\n    this._pValueHelpDialog.then(function (oValueHelpDialog) {\n      // create a filter for the binding\n      oValueHelpDialog.getBinding(\"items\").filter([new Filter(\n        \"title\",\n        FilterOperator.Contains,\n        sInputValue\n      )]);\n\t  let aSorter = [];\n\n            aSorter.push(new sap.ui.model.Sorter(\"count\", true));\n\t  oValueHelpDialog.getBinding(\"items\").sort(aSorter)\n      // open value help dialog filtered by the input value\n      oValueHelpDialog.open(sInputValue);\n    });\n  }\n\n  public _handleValueHelpSearch(evt):any {\n    var sValue = evt.getParameter(\"value\");\n    var oFilter = new Filter(\n      \"title\",\n      FilterOperator.Contains,\n      sValue\n    );\n    var oddIdFilter = new Filter({\n      path: 'title',\n      test: function(value) {\n          return value.toLowerCase().indexOf(sValue.toLowerCase()) !== -1\n      }\n  });\n    evt.getSource().getBinding(\"items\").filter(oddIdFilter);\n  }\n\n  public onTokenUpdate(evt):any {\n    this.getModel(\"data\").setProperty(\"/OPMLButtonEnabled\", true);\n  }\n\n  public _handleValueHelpClose(evt):any {\n    this.getModel(\"data\").setProperty(\"/OPMLButtonEnabled\", true);\n    var aSelectedItems = evt.getParameter(\"selectedItems\"),\n      oMultiInput = this.byId(\"multiInput\");\n\n    if (aSelectedItems && aSelectedItems.length > 0) {\n      aSelectedItems.forEach(function (oItem) {\n        oMultiInput.addToken(new Token({\n          text: oItem.getTitle(),\n          key: oItem.getBindingContext(\"tags\").getObject().tag\n        }));\n      });\n    }\n  }\n\n}\n"],"mappings":";;;;;EAAA;;EACA;;EACA;;EACA;QACOA,c;;QAGEC,O;QAEPC,a;QACAC,O;QACAC,kB;QACAC,e;QACAC,Y;QAEAC,a;;EAOF;AACA;AACA;QACqBC,I,GAAaR,c;IACnBS,W,gCAAoB;MAC/B,IAAIC,IAAI,GAAG,EAAX;MACA,KAAKC,QAAL,CAAc,MAAd,EAAsBC,WAAtB,CAAkC,gBAAlC,EAAoD,IAApD;MACA,KAAKD,QAAL,CAAc,MAAd,EAAsBC,WAAtB,CAAkC,iBAAlC,EAAqD,IAArD;;MACA,IAAI;QACF,MAAMC,SAAS,GAAGP,YAAY,CAAC,KAAKQ,GAAN,CAA9B,CADE,CAEF;;QACAC,OAAO,CAACC,GAAR,CAAYH,SAAZ;QACA,MAAMI,UAAU,GAAGV,aAAa,CAACM,SAAD,EAAY,YAAZ,CAAhC;QACA,MAAMK,WAAW,GAAG,KAAKP,QAAL,CAAc,MAAd,EAAsBQ,WAAtB,CAClB,uBADkB,CAApB;;QAGH,IAAG,CAACD,WAAD,IAAgBA,WAAW,KAAK,EAAnC,EAAsC;UACvC,KAAKP,QAAL,CAAc,MAAd,EAAsBC,WAAtB,CAAkC,gBAAlC,EAAoD,KAApD;UACA,KAAKD,QAAL,CAAc,MAAd,EAAsBC,WAAtB,CAAkC,iBAAlC,EAAqD,KAArD;UACAQ,UAAU,CAACC,KAAX,CAAiB,uBAAjB;UACA;QACA;;QACI,MAAMC,QAAQ,GAAG,MAAML,UAAU,CAAC;UAAEM,QAAQ,EAAEL;QAAZ,CAAD,CAAjC;QACAR,IAAI,GAAGc,IAAI,CAACC,KAAL,CAAWH,QAAQ,CAACZ,IAApB,CAAP;QACAK,OAAO,CAACC,GAAR,CAAYN,IAAZ;MACD,CAjBD,CAiBE,OAAOW,KAAP,EAAc;QAClB,KAAKV,QAAL,CAAc,MAAd,EAAsBC,WAAtB,CAAkC,gBAAlC,EAAoD,KAApD;QACA,KAAKD,QAAL,CAAc,MAAd,EAAsBC,WAAtB,CAAkC,iBAAlC,EAAqD,KAArD;QACIQ,UAAU,CAACC,KAAX,CAAiB,qDAAjB;QACH;MACE;;MACD,KAAKV,QAAL,CAAc,MAAd,EAAsBC,WAAtB,CAAkC,eAAlC,EAAmDF,IAAI,CAACgB,UAAxD;MACH,KAAKf,QAAL,CAAc,MAAd,EAAsBC,WAAtB,CAAkC,gBAAlC,EAAoD,SAApD;MACG,KAAKD,QAAL,CAAc,MAAd,EAAsBC,WAAtB,CAAkC,gBAAlC,EAAoD,KAApD;MACH,KAAKD,QAAL,CAAc,MAAd,EAAsBC,WAAtB,CAAkC,iBAAlC,EAAqD,KAArD;MACA,KAAKD,QAAL,CAAc,MAAd,EAAsBC,WAAtB,CAAkC,oBAAlC,EAAwD,IAAxD;IACE,C;IAEMe,M,qBAAe;MACpB,MAAMC,cAAc,GAAG;QACrBC,MAAM,EAAE,yCADa;QAErBC,UAAU,EAAE,wCAFS;QAGrBC,SAAS,EAAE,wBAHU;QAIrBC,aAAa,EAAE,oCAJM;QAKrBC,iBAAiB,EAAE,cALE;QAMrBC,KAAK,EAAE;MANc,CAAvB,CADoB,CAUpB;;MACA,KAAKpB,GAAL,GAAWZ,aAAa,CAAC0B,cAAD,CAAxB,CAXoB,CAapB;;MACA,KAAKO,IAAL,GAAYhC,OAAO,CAAC,KAAKW,GAAN,CAAnB;MACA,KAAKsB,QAAL,GAAgB,IAAIhC,kBAAJ,EAAhB;MACA,KAAKgC,QAAL,CAAcC,mBAAd,CAAkC;QAChCC,YAAY,EAAE;MADkB,CAAlC;MAGA,KAAKC,KAAL,GAAa,EAAb,CAnBoB,CAqBpB;;MACA,KAAKC,OAAL,GAAeC,QAAf,CACE,IAAIC,SAAJ,CAAc;QACZH,KAAK,EAAE,EADK;QAEZI,cAAc,EAAE,KAFJ;QAGlBC,gBAAgB,EAAG,SAHD;QAIlBC,aAAa,EAAG,SAJE;QAKlBC,iBAAiB,EAAE;MALD,CAAd,CADF,EAQE,MARF;IAUD,C;IAEMC,c,6BAAuB;MAC5B,KAAKC,iBAAL,CAAuB,KAAKZ,QAA5B;IACD,C;IAEYa,c,mCAAgC;MAC3C,KAAKtC,QAAL,CAAc,MAAd,EAAsBC,WAAtB,CAAkC,mBAAlC,EAAuD,IAAvD;MACH,KAAKD,QAAL,CAAc,MAAd,EAAsBC,WAAtB,CAAkC,iBAAlC,EAAqD,IAArD;MAEG,MAAMsC,cAAc,GAAG,KAAKvC,QAAL,CAAc,MAAd,EAAsBQ,WAAtB,CAAkC,iBAAlC,CAAvB;;MACH,IAAG,CAAC+B,cAAD,IAAmBA,cAAc,KAAK,EAAzC,EAA4C;QAC3C,KAAKvC,QAAL,CAAc,MAAd,EAAsBC,WAAtB,CAAkC,mBAAlC,EAAuD,KAAvD;QACA,KAAKD,QAAL,CAAc,MAAd,EAAsBC,WAAtB,CAAkC,iBAAlC,EAAqD,KAArD;QACAQ,UAAU,CAACC,KAAX,CAAiB,0BAAjB;QACA;MACA;;MACE,IAAI8B,IAAI,GAAG,CAAX;MACA,IAAIC,SAAS,GAAG,EAAhB;MACA,IAAIC,SAAS,GAAG,EAAhB;MACA,MAAMC,OAAO,GAAG,IAAIrD,OAAJ,CAAY;QAC1BsD,QAAQ,EAAE;UACRC,WAAW,EAAE,CAACC,UAAD,EAAkBC,OAAlB,KAAmC;YAC9C,KAAKJ,OAAL,CAAatC,GAAb,CAAiB2C,IAAjB,CACG,uCAAsCD,OAAO,CAACE,MAAO,IAAGF,OAAO,CAACG,GAAI,EADvE,EAD8C,CAK9C;;YACA,IAAIH,OAAO,CAACI,OAAR,CAAgBC,UAAhB,IAA8B,CAAlC,EAAqC;cACnChD,OAAO,CAACC,GAAR,CAAa,kBAAiByC,UAAW,WAAzC;cACA,OAAO,IAAP;YACD;UACF,CAXO;UAYRO,YAAY,EAAE,CAACP,UAAD,EAAkBC,OAAlB,KAAmC;YAC/C;YACA,KAAKJ,OAAL,CAAatC,GAAb,CAAiB2C,IAAjB,CACG,8BAA6BD,OAAO,CAACE,MAAO,IAAGF,OAAO,CAACG,GAAI,EAD9D;UAGD;QAjBO;MADgB,CAAZ,CAAhB;MAqBA,IAAII,eAAJ;;MACA,IAAI;QACFA,eAAe,GAAG,MAAMX,OAAO,CAACQ,OAAR,CACrB,cAAaZ,cAAe,YADP,CAAxB;MAGD,CAJD,CAIE,OAAO7B,KAAP,EAAmB;QACnB;QACA,IAAIA,KAAK,CAAC6C,MAAN,KAAiB,GAArB,EAA0B;UAC9B,KAAKvD,QAAL,CAAc,MAAd,EAAsBC,WAAtB,CAAkC,mBAAlC,EAAuD,KAAvD;UACA,KAAKD,QAAL,CAAc,MAAd,EAAsBC,WAAtB,CAAkC,iBAAlC,EAAqD,KAArD;UACMQ,UAAU,CAACC,KAAX,CAAkB,QAAO6B,cAAe,YAAxC;QACD,CAJD,MAIO;UACX,KAAKvC,QAAL,CAAc,MAAd,EAAsBC,WAAtB,CAAkC,mBAAlC,EAAuD,KAAvD;UACA,KAAKD,QAAL,CAAc,MAAd,EAAsBC,WAAtB,CAAkC,iBAAlC,EAAqD,KAArD;UACMQ,UAAU,CAACC,KAAX,CAAiBA,KAAK,CAAC8C,OAAvB;QACD;MACF;;MACDd,SAAS,GAAGY,eAAe,CAACvD,IAA5B;;MACA,OAAOuD,eAAe,CAACvD,IAAhB,CAAqB0D,MAArB,IAA+B,EAAtC,EAA0C;QACxCjB,IAAI,IAAI,CAAR;QACAc,eAAe,GAAG,MAAMX,OAAO,CAACQ,OAAR,CACrB,cAAaZ,cAAe,YADP,EAEtB;UAAEC,IAAI,EAAEA;QAAR,CAFsB,CAAxB;QAIAE,SAAS,GAAG,CAAC,GAAGA,SAAJ,EAAe,GAAGY,eAAe,CAACvD,IAAlC,CAAZ;MACD;;MACD,KAAKC,QAAL,CAAc,MAAd,EAAsBC,WAAtB,CAAkC,kBAAlC,EAAsDyC,SAAtD;MACH,KAAK1C,QAAL,CAAc,MAAd,EAAsBC,WAAtB,CAAkC,mBAAlC,EAAuD,SAAvD;MACG,KAAKD,QAAL,CAAc,MAAd,EAAsBC,WAAtB,CAAkC,mBAAlC,EAAuD,KAAvD;MACH,KAAKD,QAAL,CAAc,MAAd,EAAsBC,WAAtB,CAAkC,iBAAlC,EAAqD,KAArD;MACA,KAAKD,QAAL,CAAc,MAAd,EAAsBC,WAAtB,CAAkC,oBAAlC,EAAwD,IAAxD,EAjE8C,CAkE3C;IACD,C;IAEMyD,I,mBAAa;MAClB,MAAMC,eAAe,GACnB,KAAK3D,QAAL,CAAc,MAAd,EAAsBQ,WAAtB,CAAkC,kBAAlC,KAAyD,EAD3D;MAEA,MAAMoD,YAAY,GAChB,KAAK5D,QAAL,CAAc,MAAd,EAAsBQ,WAAtB,CAAkC,eAAlC,KAAsD,EADxD;MAEA,MAAMqD,QAAQ,GAAG,KAAKC,IAAL,CAAU,YAAV,EAAwBC,SAAxB,EAAjB;MACA,IAAIC,cAAc,GAAG,EAArB;MACA,IAAIC,WAAW,GAAG,EAAlB;MACA,IAAIC,gBAAgB,GAAG,EAAvB;MACA,IAAIC,MAAM,GAAG;QACXC,KAAK,EAAE,YADI;QAEXC,WAAW,EAAE,IAAIC,IAAJ,CAAS,IAAT,EAAe,CAAf,EAAkB,CAAlB,CAFF;QAGXC,SAAS,EAAE;MAHA,CAAb;;MAKA,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGb,eAAe,CAACF,MAApC,EAA4Ce,CAAC,EAA7C,EAAiD;QAC/CR,cAAc,CAACS,IAAf,CAAoB;UAClBC,IAAI,EAAEf,eAAe,CAACa,CAAD,CAAf,CAAmBG,KADP;UAElBP,KAAK,EAAET,eAAe,CAACa,CAAD,CAAf,CAAmBG,KAFR;UAGlBC,IAAI,EAAE,KAHY;UAIlBC,MAAM,EAAElB,eAAe,CAACa,CAAD,CAAf,CAAmBM,QAAnB,GAA8B,OAJpB;UAKlBC,OAAO,EAAEpB,eAAe,CAACa,CAAD,CAAf,CAAmBM;QALV,CAApB;MAOD;;MACD,KAAK,IAAIN,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGZ,YAAY,CAACH,MAAjC,EAAyCe,CAAC,EAA1C,EAA8C;QAC5CP,WAAW,CAACQ,IAAZ,CAAiB;UACfC,IAAI,EAAEd,YAAY,CAACY,CAAD,CAAZ,CAAgBQ,QADP;UAEfZ,KAAK,EAAER,YAAY,CAACY,CAAD,CAAZ,CAAgBQ,QAFR;UAGfJ,IAAI,EAAE,KAHS;UAIfC,MAAM,EAAG,gDAA+CjB,YAAY,CAACY,CAAD,CAAZ,CAAgB5D,QAAS,EAJlE;UAKfmE,OAAO,EAAEnB,YAAY,CAACY,CAAD,CAAZ,CAAgBS;QALV,CAAjB;MAOD;;MACD,KAAK,IAAIT,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGX,QAAQ,CAACJ,MAA7B,EAAqCe,CAAC,EAAtC,EAA0C;QACxCN,gBAAgB,CAACO,IAAjB,CAAsB;UACpBC,IAAI,EAAEb,QAAQ,CAACW,CAAD,CAAR,CAAYU,OAAZ,EADc;UAEpBd,KAAK,EAAEP,QAAQ,CAACW,CAAD,CAAR,CAAYU,OAAZ,EAFa;UAGpBN,IAAI,EAAE,KAHc;UAIpBC,MAAM,EAAG,gEAA+DhB,QAAQ,CAACW,CAAD,CAAR,CAAYW,MAAZ,EAAqB,EAJzE;UAKpBJ,OAAO,EAAG,8BAA6BlB,QAAQ,CAACW,CAAD,CAAR,CAAYW,MAAZ,EAAqB;QALxC,CAAtB;MAOD;;MACD,IAAIC,SAAS,GACX,4DADF;MAEA,IAAIC,iBAAiB,GAAG,EAAxB;MACA,IAAIC,cAAc,GAAG,EAArB;MACA,IAAIC,mBAAmB,GAAG,EAA1B;;MACA,KAAK,IAAIf,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGR,cAAc,CAACP,MAAnC,EAA2Ce,CAAC,EAA5C,EAAgD;QAC9C,IAAIgB,WAAW,GACb,oBACAxB,cAAc,CAACQ,CAAD,CAAd,CAAkBE,IADlB,GAEA,WAFA,GAGAV,cAAc,CAACQ,CAAD,CAAd,CAAkBJ,KAHlB,GAIA,UAJA,GAKAJ,cAAc,CAACQ,CAAD,CAAd,CAAkBI,IALlB,GAMA,YANA,GAOAZ,cAAc,CAACQ,CAAD,CAAd,CAAkBK,MAPlB,GAQA,aARA,GASAb,cAAc,CAACQ,CAAD,CAAd,CAAkBO,OATlB,GAUA,MAXF;QAYAM,iBAAiB,CAACZ,IAAlB,CAAuBe,WAAvB;MACD;;MACD,KAAK,IAAIhB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGP,WAAW,CAACR,MAAhC,EAAwCe,CAAC,EAAzC,EAA6C;QAC3C,IAAIgB,WAAW,GACb,oBACAvB,WAAW,CAACO,CAAD,CAAX,CAAeE,IADf,GAEA,WAFA,GAGAT,WAAW,CAACO,CAAD,CAAX,CAAeJ,KAHf,GAIA,UAJA,GAKAH,WAAW,CAACO,CAAD,CAAX,CAAeI,IALf,GAMA,YANA,GAOAX,WAAW,CAACO,CAAD,CAAX,CAAeK,MAPf,GAQA,aARA,GASAZ,WAAW,CAACO,CAAD,CAAX,CAAeO,OATf,GAUA,MAXF;QAYAO,cAAc,CAACb,IAAf,CAAoBe,WAApB;MACD;;MACD,KAAK,IAAIhB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGN,gBAAgB,CAACT,MAArC,EAA6Ce,CAAC,EAA9C,EAAkD;QAChD,IAAIgB,WAAW,GACb,oBACAtB,gBAAgB,CAACM,CAAD,CAAhB,CAAoBE,IADpB,GAEA,WAFA,GAGAR,gBAAgB,CAACM,CAAD,CAAhB,CAAoBJ,KAHpB,GAIA,UAJA,GAKAF,gBAAgB,CAACM,CAAD,CAAhB,CAAoBI,IALpB,GAMA,YANA,GAOAV,gBAAgB,CAACM,CAAD,CAAhB,CAAoBK,MAPpB,GAQA,aARA,GASAX,gBAAgB,CAACM,CAAD,CAAhB,CAAoBO,OATpB,GAUA,MAXF;QAYAQ,mBAAmB,CAACd,IAApB,CAAyBe,WAAzB;MACD;;MACD,IAAIA,WAAW,GAAG,EAAlB;;MACA,IAAIF,cAAc,CAAC7B,MAAf,GAAwB,CAA5B,EAA+B;QAC7B+B,WAAW,GACT,6EACAF,cADA,GAEA,aAHF;MAID;;MACD,IAAID,iBAAiB,CAAC5B,MAAlB,GAA2B,CAA/B,EAAkC;QAChC+B,WAAW,GACTA,WAAW,GACX,4DADA,GAEAH,iBAFA,GAGA,aAJF;MAKD;;MACD,IAAIE,mBAAmB,CAAC9B,MAApB,GAA6B,CAAjC,EAAoC;QAClC+B,WAAW,GACTA,WAAW,GACX,8CADA,GAEAD,mBAFA,GAGA,aAJF;MAKD;;MACD,IAAIE,GAAG,GACL,+DACAL,SADA,GAEA,QAFA,GAGAI,WAHA,GAIA,SAJA,GAKA,SANF;MAOA,KAAKE,YAAL,CAAkB,UAAlB,EAA8BD,GAA9B;IACD,C;IACMpD,iB,8BAAkBZ,Q,EAAgB;MACvC;MACA,MAAMD,IAAI,GAAGhC,OAAO,EAApB;MACAE,eAAe,CAAC8B,IAAD,EAAOC,QAAP,CAAf,CACGkE,IADH,CACSC,MAAD,IAAY;QAChB;QAEA;QACA,KAAKhE,KAAL,GAAagE,MAAM,CAACC,cAAP,CAAsBC,gBAAnC;QACA,KAAK9F,QAAL,CAAc,MAAd,EAAsBC,WAAtB,CAAkC,QAAlC,EAA4C,KAAK2B,KAAjD,EALgB,CAMhB;MACD,CARH,EASGmE,KATH,CASUrF,KAAD,IAAW;QAChB;QACA,IAAIsF,SAAS,GAAGtF,KAAK,CAACuF,IAAtB;QACA,IAAIC,YAAY,GAAGxF,KAAK,CAAC8C,OAAzB,CAHgB,CAIhB;;QACA,IAAI2C,KAAK,GAAGzF,KAAK,CAACyF,KAAlB,CALgB,CAMhB;;QACA,IAAIC,UAAU,GAAG1F,KAAK,CAAC0F,UAAvB,CAPgB,CAQhB;MACD,CAlBH,EAHuC,CAsBvC;IACD,C;IAEMV,Y,yBAAaW,Q,EAAU3B,I,EAAY;MACxC,IAAI4B,OAAO,GAAGC,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAAd;MACAF,OAAO,CAACG,YAAR,CACE,MADF,EAEE,mCAAmCC,kBAAkB,CAAChC,IAAD,CAFvD;MAIA4B,OAAO,CAACG,YAAR,CAAqB,UAArB,EAAiCJ,QAAjC;MAEAC,OAAO,CAACK,KAAR,CAAcC,OAAd,GAAwB,MAAxB;MACAL,QAAQ,CAACM,IAAT,CAAcC,WAAd,CAA0BR,OAA1B;MAEAA,OAAO,CAACS,KAAR;MAEAR,QAAQ,CAACM,IAAT,CAAcG,WAAd,CAA0BV,OAA1B;IACD,C;IAEMW,e,4BAAgBC,M,EAAa;MAClC,IAAIC,WAAW,GAAGD,MAAM,CAACE,SAAP,GAAmBC,QAAnB,EAAlB;MAAA,IACEC,KAAK,GAAG,KAAKzF,OAAL,EADV,CADkC,CAIlC;;MACA,IAAI,CAAC,KAAK0F,iBAAV,EAA6B;QAC3B,KAAKA,iBAAL,GAAyBC,QAAQ,CAACC,IAAT,CAAc;UACrCC,EAAE,EAAEJ,KAAK,CAACK,KAAN,EADiC;UAErCC,IAAI,EAAE,0CAF+B;UAGrCC,UAAU,EAAE;QAHyB,CAAd,EAItBlC,IAJsB,CAIjB,UAAUmC,gBAAV,EAA4B;UAClCR,KAAK,CAACS,YAAN,CAAmBD,gBAAnB;UACA,OAAOA,gBAAP;QACD,CAPwB,CAAzB;MAQD;;MAED,KAAKP,iBAAL,CAAuB5B,IAAvB,CAA4B,UAAUmC,gBAAV,EAA4B;QACtD;QACAA,gBAAgB,CAACE,UAAjB,CAA4B,OAA5B,EAAqCC,MAArC,CAA4C,CAAC,IAAIC,MAAJ,CAC3C,OAD2C,EAE3CC,cAAc,CAACC,QAF4B,EAG3CjB,WAH2C,CAAD,CAA5C;QAKH,IAAIkB,OAAO,GAAG,EAAd;QAESA,OAAO,CAAC5D,IAAR,CAAa,IAAI6D,GAAG,CAACC,EAAJ,CAAOC,KAAP,CAAaC,MAAjB,CAAwB,OAAxB,EAAiC,IAAjC,CAAb;QACTX,gBAAgB,CAACE,UAAjB,CAA4B,OAA5B,EAAqCU,IAArC,CAA0CL,OAA1C,EAVyD,CAWtD;;QACAP,gBAAgB,CAACa,IAAjB,CAAsBxB,WAAtB;MACD,CAbD;IAcD,C;IAEMyB,sB,kCAAuBC,G,EAAS;MACrC,IAAIC,MAAM,GAAGD,GAAG,CAACE,YAAJ,CAAiB,OAAjB,CAAb;MACA,IAAIC,OAAO,GAAG,IAAId,MAAJ,CACZ,OADY,EAEZC,cAAc,CAACC,QAFH,EAGZU,MAHY,CAAd;MAKA,IAAIG,WAAW,GAAG,IAAIf,MAAJ,CAAW;QAC3BgB,IAAI,EAAE,OADqB;QAE3BC,IAAI,EAAE,UAASC,KAAT,EAAgB;UAClB,OAAOA,KAAK,CAACC,WAAN,GAAoBC,OAApB,CAA4BR,MAAM,CAACO,WAAP,EAA5B,MAAsD,CAAC,CAA9D;QACH;MAJ0B,CAAX,CAAlB;MAMAR,GAAG,CAACzB,SAAJ,GAAgBY,UAAhB,CAA2B,OAA3B,EAAoCC,MAApC,CAA2CgB,WAA3C;IACD,C;IAEMM,a,0BAAcV,G,EAAS;MAC5B,KAAK7I,QAAL,CAAc,MAAd,EAAsBC,WAAtB,CAAkC,oBAAlC,EAAwD,IAAxD;IACD,C;IAEMuJ,qB,iCAAsBX,G,EAAS;MACpC,KAAK7I,QAAL,CAAc,MAAd,EAAsBC,WAAtB,CAAkC,oBAAlC,EAAwD,IAAxD;MACA,IAAIwJ,cAAc,GAAGZ,GAAG,CAACE,YAAJ,CAAiB,eAAjB,CAArB;MAAA,IACEW,WAAW,GAAG,KAAK5F,IAAL,CAAU,YAAV,CADhB;;MAGA,IAAI2F,cAAc,IAAIA,cAAc,CAAChG,MAAf,GAAwB,CAA9C,EAAiD;QAC/CgG,cAAc,CAACE,OAAf,CAAuB,UAAUC,KAAV,EAAiB;UACtCF,WAAW,CAACG,QAAZ,CAAqB,IAAIC,KAAJ,CAAU;YAC7BpF,IAAI,EAAEkF,KAAK,CAACG,QAAN,EADuB;YAE7BC,GAAG,EAAEJ,KAAK,CAACK,iBAAN,CAAwB,MAAxB,EAAgCC,SAAhC,GAA4CC;UAFpB,CAAV,CAArB;QAID,CALD;MAMD;IACF;;SAjXkBtK,I"}