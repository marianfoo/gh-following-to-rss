/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/base/SyncPromise","sap/ui/model/Context","sap/ui/model/_Helper"],function(e,t,i){"use strict";var r=["changeSetId","groupId","refreshAfterChange"];var o=t.extend("sap.ui.model.odata.v2.Context",{constructor:function(i,r,o,s,n){var a=this;t.call(this,i,r);this.oCreatePromise=undefined;this.sDeepPath=o||r;this.bForceRefresh=false;this.bPreliminary=false;this.oSyncCreatePromise=s;this.bUpdated=false;this.bInactive=!!n;this.fnActivate=undefined;this.oActivatedPromise=n?new e(function(e){a.fnActivate=e}):e.resolve()}});o.prototype.activate=function(){this.bInactive=false;if(this.fnActivate){this.fnActivate()}};o.prototype.created=function(){if(this.oSyncCreatePromise&&!this.oCreatePromise){this.oCreatePromise=Promise.resolve(this.oSyncCreatePromise).then(function(){})}return this.oCreatePromise};o.prototype.delete=function(e){var t,o=this.getModel(),s=this;e=e||{};for(t in e){if(!r.includes(t)){throw new Error("Parameter '"+t+"' is not supported")}}if(this.isInactive()){o._discardEntityChanges(o._getKey(this),true);o.checkUpdate();return Promise.resolve()}else if(this.isTransient()){return o.resetChanges([this.getPath()],false,true)}return new Promise(function(t,r){var n=o._resolveGroup(s.getPath());o.remove("",i.merge({changeSetId:n.changeSetId,context:s,error:r,groupId:n.groupId,success:function(){t()}},e))})};o.prototype.fetchActivated=function(){return this.oActivatedPromise};o.prototype.getDeepPath=function(){return this.sDeepPath};o.prototype.hasChanged=function(){return this.bUpdated||this.bForceRefresh};o.prototype.isInactive=function(){return this.bInactive};o.prototype.isPreliminary=function(){return this.bPreliminary};o.prototype.isRefreshForced=function(){return this.bForceRefresh};o.prototype.isTransient=function(){return this.oSyncCreatePromise&&this.oSyncCreatePromise.isPending()};o.prototype.isUpdated=function(){return this.bUpdated};o.prototype.resetCreatedPromise=function(){this.oCreatePromise=undefined;this.oSyncCreatePromise=undefined};o.prototype.setDeepPath=function(e){this.sDeepPath=e};o.prototype.setForceRefresh=function(e){this.bForceRefresh=e};o.prototype.setPreliminary=function(e){this.bPreliminary=e};o.prototype.setUpdated=function(e){this.bUpdated=e};return o});