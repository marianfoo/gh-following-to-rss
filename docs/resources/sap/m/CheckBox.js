/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./Label","./library","sap/ui/Device","sap/ui/core/Control","sap/ui/core/EnabledPropagator","sap/ui/core/library","./CheckBoxRenderer","sap/ui/events/KeyCodes","sap/ui/core/LabelEnablement","sap/ui/core/message/MessageMixin"],function(e,t,a,i,r,o,n,s,l,p){"use strict";var u=o.ValueState;var d=o.TextAlign;var g=o.TextDirection;var c=i.extend("sap.m.CheckBox",{metadata:{interfaces:["sap.ui.core.IFormContent","sap.ui.core.ISemanticFormContent"],library:"sap.m",properties:{selected:{type:"boolean",group:"Data",defaultValue:false},partiallySelected:{type:"boolean",group:"Data",defaultValue:false},enabled:{type:"boolean",group:"Behavior",defaultValue:true},name:{type:"string",group:"Misc",defaultValue:null},text:{type:"string",group:"Appearance",defaultValue:null},textDirection:{type:"sap.ui.core.TextDirection",group:"Appearance",defaultValue:g.Inherit},textAlign:{type:"sap.ui.core.TextAlign",group:"Appearance",defaultValue:d.Begin},width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:""},useEntireWidth:{type:"boolean",group:"Appearance",defaultValue:false},activeHandling:{type:"boolean",group:"Misc",defaultValue:true},editable:{type:"boolean",group:"Behavior",defaultValue:true},valueState:{type:"sap.ui.core.ValueState",group:"Data",defaultValue:u.None},valueStateText:{type:"string",group:"Misc",defaultValue:null,visibility:"hidden"},displayOnly:{type:"boolean",group:"Behavior",defaultValue:false},wrapping:{type:"boolean",group:"Appearance",defaultValue:false}},aggregations:{_label:{type:"sap.m.Label",group:"Behavior",multiple:false,visibility:"hidden"}},associations:{ariaDescribedBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaDescribedBy"},ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},events:{select:{parameters:{selected:{type:"boolean"}}}},dnd:{draggable:true,droppable:false},designtime:"sap/m/designtime/CheckBox.designtime"}});r.call(c.prototype);p.call(c.prototype);c.prototype.init=function(){this._handleReferencingLabels()};c.prototype.exit=function(){this._oLabel=null;delete this._iTabIndex};c.prototype.setText=function(e){var t=this._getLabel();this.setProperty("text",e);t.setText(e);return this};c.prototype.setWidth=function(e){this.setProperty("width",e,true);this._setWidth();return this};c.prototype.setUseEntireWidth=function(e){this.setProperty("useEntireWidth",e,true);this._setWidth();return this};c.prototype.setTextDirection=function(e){var t=this._getLabel();this.setProperty("textDirection",e);t.setTextDirection(e);return this};c.prototype.setTextAlign=function(e){var t=this._getLabel();this.setProperty("textAlign",e);t.setTextAlign(e);return this};c.prototype.setValueStateText=function(e){return this.setProperty("valueStateText",e)};c.prototype.setWrapping=function(e){var t=this._getLabel();this.setProperty("wrapping",e);t.setWrapping(e);return this};c.prototype.getFormattedState=function(){var e=sap.ui.getCore().getLibraryResourceBundle("sap.m");return this.getSelected()?e.getText("ACC_CTR_STATE_CHECKED"):e.getText("ACC_CTR_STATE_NOT_CHECKED")};c.prototype.getFormFormattedValue=function(){return this.getFormattedState()};c.prototype.getFormValueProperty=function(){return"selected"};c.prototype.ontouchstart=function(e){e.originalEvent._sapui_handledByControl=true};c.prototype.ontap=function(e){var t;if(this.getEnabled()&&this.getEditable()&&!this.getDisplayOnly()){this.$().trigger("focus");t=this._getSelectedState();this.setSelected(t);this.setPartiallySelected(false);this.fireSelect({selected:t});e&&e.setMarked()}};c.prototype.onkeyup=function(e){if(e&&e.which===s.SPACE&&!e.shiftKey){this.ontap(e);e.preventDefault()}};c.prototype.onsapspace=function(e){e.preventDefault()};c.prototype.onsapenter=function(e){this.ontap(e)};c.prototype.setTabIndex=function(e){this._iTabIndex=e;this.$("CbBg").attr("tabindex",e);return this};c.prototype.getTabIndex=function(){if(this.hasOwnProperty("_iTabIndex")){return this._iTabIndex}return this.getEnabled()&&!this.getDisplayOnly()?0:-1};c.prototype._getLabel=function(){if(!this._oLabel){this._oLabel=new e(this.getId()+"-label").addStyleClass("sapMCbLabel");this.setAggregation("_label",this._oLabel,true)}return this.getAggregation("_label")};c.prototype._setWidth=function(){var e=this._getLabel(),t=this.$(),a=this.getWidth();if(this.getUseEntireWidth()){e.setWidth("");t.outerWidth(a)}else{t.outerWidth("");e.setWidth(a)}};c.prototype._getSelectedState=function(){var e=this.getSelected(),t=this.getPartiallySelected();return e===t||!e&&t};c.prototype._getAriaChecked=function(){var e=this.getSelected();if(this.getPartiallySelected()&&e){return"mixed"}return e};c.prototype._fnLabelTapHandler=function(){this.$().trigger("focus")};c.prototype._handleReferencingLabels=function(){var e=l.getReferencingLabels(this),t=this;if(e.length>0){e.forEach(function(e){sap.ui.getCore().byId(e).addEventDelegate({ontap:function(){t._fnLabelTapHandler()}})})}};c.prototype.getAccessibilityInfo=function(){var e=sap.ui.getCore().getLibraryResourceBundle("sap.m"),t=this.getText();return{role:"checkbox",type:e.getText("ACC_CTR_TYPE_CHECKBOX"),description:(t?t+" ":"")+this.getFormattedState(),focusable:this.getEnabled()&&!this.getDisplayOnly(),enabled:this.getEnabled(),editable:this.getEditable()}};c.prototype.getFormDoNotAdjustWidth=function(){return this.getText()?false:true};return c});