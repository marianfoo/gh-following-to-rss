/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Renderer","sap/ui/core/Core","sap/ui/core/InvisibleText","./library","./ListBaseRenderer","./ColumnListItemRenderer","sap/m/table/Util"],function(e,t,a,s,r,l,o){"use strict";var i=s.ListKeyboardMode;var n=s.MultiSelectMode;var d=e.extend(r);d.apiVersion=2;var c=t.getConfiguration().getRTL();d.columnAlign={left:c?"flex-end":"flex-start",center:"center",right:c?"flex-start":"flex-end"};d.renderColumns=function(e,t,a){var s=0,l=0,o=false,i=false,c=t.getMode(),u=r.ModeOrder[c],p="sapMListTbl",g=t.getId("tbl"),f=a=="Head"?"th":"td",C="t"+a.toLowerCase(),b=t.getColumns(),h=t.shouldRenderDummyColumn(),m,H=function(t,r,l){e.openStart(f,r&&g+r);if(f==="th"){e.class("sapMTableTH");e.attr("role",l?"presentation":"columnheader");e.attr("scope","col")}else if(l){e.attr("role","presentation")}l&&e.attr("aria-hidden","true");e.class(p+t);if(a==="Foot"){if(t==="HighlightCol"){e.class("sapMTableHighlightFooterCell")}else if(t==="NavigatedCol"){e.class("sapMTableNavigatedFooterCell")}}e.openEnd();e.close(f);s++};if(a=="Head"){var M=b.filter(function(e){return e.getVisible()});var L=b.reduce(function(e,t,a){t.setIndex(-1);t.setInitialOrder(a);t.setForcedColumn(false);return t.getVisible()&&t.getCalculatedMinScreenWidth()<e.getCalculatedMinScreenWidth()?t:e},M[0]);var T=b.filter(function(e){return e.getVisible()&&!e.isPopin()&&!e.isHidden()}).length;if(!T&&L){L.setForcedColumn(true);T=1}m=b.every(function(e){return!e.getHeader()||!e.getHeader().getVisible()||!e.getVisible()||e.isPopin()||e.isHidden()})}e.openStart(C);if(t._hasFooter&&a==="Foot"){e.class("sapMTableTFoot");if(t.hasPopin()){e.class("sapMListTblHasPopin")}}e.openEnd();e.openStart("tr",t.addNavSection(g+a+"er"));e.attr("tabindex",-1);if(m){e.class("sapMListTblHeaderNone")}else{e.class("sapMListTblRow").class("sapMListTbl"+a+"er");e.class("sapMLIBFocusable").class("sapMTableRowCustomFocus")}e.openEnd();H("HighlightCol",a+"Highlight",true);if(u==-1){if(c=="MultiSelect"&&a=="Head"&&!m){e.openStart("th");e.class("sapMTableTH");e.attr("scope","col");e.attr("aria-hidden","true");e.class(p+"SelCol");e.attr("role","presentation");e.openEnd();e.renderControl(t.getMultiSelectMode()==n.Default?t._getSelectAllCheckbox():t._getClearAllButton());e.close("th");s++}else{H("SelCol","",true)}}t.getColumns(true).forEach(function(r,n){if(!r.getVisible()){return}if(r.isPopin()){o=true;return}var c=r.isHidden();if(c){l++}var u=r["get"+a+"er"](),g=t.getFixedLayout(),C=T==1&&g!="Strict"?"":r.getWidth(),b=r.getStyleClass(true).split(" "),h=r.getCssAlign();t._bCheckLastColumnWidth=g=="Strict"&&T==1;if(a=="Head"){e.openStart(f,r);e.class("sapMTableTH");e.attr("role","columnheader");e.attr("scope","col");var m=r.getSortIndicator().toLowerCase();m!=="none"&&e.attr("aria-sort",m)}else{e.openStart(f)}b&&b.forEach(function(t){e.class(t)});e.class(p+"Cell");e.class(p+a+"erCell");e.attr("data-sap-ui-column",r.getId());e.attr("data-sap-width",r.getWidth());e.style("width",C);if(h&&a!=="Head"){e.style("text-align",h)}if(c){e.style("display","none");e.attr("aria-hidden","true")}e.openEnd();if(u){if(a==="Head"){e.openStart("div");e.class("sapMColumnHeader");var H=r.getColumnHeaderMenu();if((t.bActiveHeaders||H)&&!u.isA("sap.ui.core.InvisibleText")){e.attr("tabindex",0);e.attr("role","button");e.class("sapMColumnHeaderActive");e.attr("aria-haspopup",H?H.getAriaHasPopupType().toLowerCase():"dialog")}else if(t.bFocusableHeaders){e.attr("tabindex",0);e.class("sapMColumnHeaderFocusable")}if(h){e.style("justify-content",d.columnAlign[h]);e.style("text-align",h)}e.openEnd();e.renderControl(u.addStyleClass("sapMColumnHeaderContent"));e.close("div")}else{e.renderControl(u)}}if(a=="Head"&&!i){i=!!r.getFooter()}e.close(f);r.setIndex(s++)});if(o&&h){H("DummyCell",a+"DummyCell",true)}H("NavCol",a+"Nav",true);if(u==1){H("SelCol","",true)}H("NavigatedCol",a+"Navigated",true);if(!o&&h){H("DummyCell",a+"DummyCell",true)}e.close("tr");e.close(C);if(a==="Head"){t._hasPopin=o;t._colCount=s-l;t._hasFooter=i;t._headerHidden=m}};d.renderContainerAttributes=function(e,a){e.attr("role","application").attr("data-sap-ui-pasteregion","true");e.attr("aria-roledescription",t.getLibraryResourceBundle("sap.m").getText("TABLE_CONTAINER_ROLE_DESCRIPTION"));e.class("sapMListTblCnt");e.accessibilityState(a,this.getAccessibilityState(a))};d.renderListStartAttributes=function(e,t){e.openStart("table",t.getId("listUl"));e.class("sapMListTbl");e.attr("aria-labelledby",t.getAriaLabelledBy().concat(this.getAriaLabelledBy(t),a.getStaticId("sap.m","TABLE_ARIA_LABEL")).join(" "));if(t.getFixedLayout()===false){e.style("table-layout","auto")}if(t._iItemNeedsColumn){e.class("sapMListTblHasNav")}};d.getAriaRole=function(e){return""};d.renderListHeadAttributes=function(e,t){t._aPopinHeaders=[];this.renderColumns(e,t,"Head");e.openStart("tbody",t.addNavSection(t.getId("tblBody")));e.class("sapMListItems");e.class("sapMTableTBody");if(t.getAlternateRowColors()){e.class(t._getAlternateRowColorsClass())}if(t.hasPopin()){e.class("sapMListTblHasPopin")}e.openEnd()};d.renderListEndAttributes=function(e,t){e.close("tbody");t._hasFooter&&this.renderColumns(e,t,"Foot");e.close("table");this.renderPopinColumnHeaders(e,t)};d.renderPopinColumnHeaders=function(e,t){if(!t._aPopinHeaders||!t._aPopinHeaders.length){return}e.openStart("div",t.getId("popin-headers"));e.class("sapMTablePopinHeaders");e.attr("aria-hidden","true");e.openEnd();t._aPopinHeaders.forEach(function(t){e.renderControl(t)});e.close("div")};d.renderNoData=function(e,a){e.openStart("tr",a.getId("nodata"));e.attr("tabindex",a.getKeyboardMode()==i.Navigation?-1:0);e.class("sapMLIB").class("sapMListTblRow").class("sapMLIBTypeInactive");l.addFocusableClasses(e,a);if(!a._headerHidden||!a.getHeaderText()&&!a.getHeaderToolbar()){e.class("sapMLIBShowSeparator")}e.openEnd();var s=!a.hasPopin()&&a.shouldRenderDummyColumn();e.openStart("td",a.getId("nodata-text"));e.attr("colspan",a.getColCount()-s);e.class("sapMListTblCell").class("sapMListTblCellNoData");e.openEnd();if(!a.shouldRenderItems()){var r=a.getNoData();if(r&&typeof r!=="string"&&r.isA("sap.m.IllustratedMessage")){e.renderControl(a.getAggregation("_noColumnsMessage"))}else{e.text(t.getLibraryResourceBundle("sap.m").getText("TABLE_NO_COLUMNS"))}}else{this.renderNoDataArea(e,a)}e.close("td");if(s){l.renderDummyCell(e,a)}e.close("tr")};return d},true);